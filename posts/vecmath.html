<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Morten H. Solvang" />
  <title>2d rotation using complex numbers</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.line-block{white-space: pre-line;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
div.sourceLine, a.sourceLine { display: inline-block; min-height: 1.25em; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; }
@media print {
code.sourceCode { white-space: pre-wrap; }
div.sourceLine, a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource div.sourceLine, .numberSource a.sourceLine
  { position: relative; }
pre.numberSource div.sourceLine::before, .numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em; }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
pre, code { color: #cccccc; background-color: #303030; }
@media screen {
a.sourceLine::before { text-decoration: underline; color: initial; }
}
code span.kw { color: #f0dfaf; } /* Keyword */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.bn { color: #dca3a3; } /* BaseN */
code span.fl { color: #c0bed1; } /* Float */
code span.ch { color: #dca3a3; } /* Char */
code span.st { color: #cc9393; } /* String */
code span.co { color: #7f9f7f; } /* Comment */
code span.ot { color: #efef8f; } /* Other */
code span.al { color: #ffcfaf; } /* Alert */
code span.fu { color: #efef8f; } /* Function */
code span.er { color: #c3bf9f; } /* Error */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.ss { color: #cc9393; } /* SpecialString */
code span.im { } /* Import */
code span.va { } /* Variable */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.op { color: #f0efd0; } /* Operator */
code span.bu { } /* BuiltIn */
code span.ex { } /* Extension */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.at { } /* Attribute */
code span.do { color: #7f9f7f; } /* Documentation */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
  </style>
  <link rel="stylesheet" href="../style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div id="back-button">
    <a href="../index.html">Home</a>
</div>
<header>
<h1 class="title">2d rotation using complex numbers</h1>
<p class="author">Morten H. Solvang</p>
<p class="date">December, 2017</p>
</header>
<p>In this post, I will go over how we can use some of the properties of complex numbers to rotate 2d vectors. Instead of just going over the raw mathemathics, I have created a simple interactive demo of complex number, which hopefully will give you a good intuition of how complex numbers work:</p>
<!-- We manually insert figure 1 because it is a canvas -->
<figure>
<canvas id="figure1" width="424" height="393">
<img src="../figures/vecmath_figure_1_fast.svg"></img>
</canvas>
<figcaption>
Figure 1: Try moving <span class="math inline">\(p\)</span> and <span class="math inline">\(q\)</span> around, and see how <span class="math inline">\(w\)</span> reacts!
</figcaption>
</figure>
<script src="../other/vecmath_script.js"></script>
<p>Feel free to spend a moment playing with figure 1.</p>
<p>At first, it might seem like there is not much of a pattern to how <span class="math inline">\(w\)</span> reacts when you move <span class="math inline">\(p\)</span> and <span class="math inline">\(q\)</span>. Lets look into what happens behind the scenes:</p>
<p><span class="math inline">\(p\)</span>, <span class="math inline">\(q\)</span> and <span class="math inline">\(w\)</span> are all complex numbers. That is, they are a sum of some real number <span class="math inline">\(x\)</span> and some imaginary number <span class="math inline">\(y \cdot i\)</span>. <span class="math inline">\(x\)</span> is placed along the real axis, which is horizontal, while <span class="math inline">\(y\)</span> is placed along the imaginary axis, which is vertical. Below are some examples. Press the buttons to move the points in figure 1.</p>
<table>
<tr>
<td>
<span class="math inline">\(p = 0.5\)</span>
</td>
<td>
<button id="example_button_1">
Show
</button>
</td>
</tr>
<tr>
<td>
<span class="math inline">\(p = -0.75i\)</span>
</td>
<td>
<button id="example_button_2">
Show
</button>
</td>
</tr>
<tr>
<td>
<span class="math inline">\(p = -0.5 + i\)</span>
</td>
<td>
<button id="example_button_3">
Show
</button>
</td>
</tr>
</table>
<h2 id="polar-and-cartesian-form">Polar and cartesian form</h2>
<p>A complex number <span class="math inline">\(z\)</span> is the sum of some real number <span class="math inline">\(a\)</span> and some imaginary number <span class="math inline">\(b \cdot i\)</span>. (Remember, <span class="math inline">\(i = \sqrt{-1}\)</span>). <span class="math inline">\(z\)</span> is then: <span class="math display">\[z = a + b \cdot i\]</span> If we try to place <span class="math inline">\(z\)</span> on the number line, we run into an issue: <span class="math inline">\(i\)</span> is nowhere to be found. Instead, we have to place <span class="math inline">\(b \cdot i\)</span> along a separate number line. This gives us a pair of number lines, a number plane, as shown in figure 2a.</p>
<p>Complex numbers are also commonly represented in polar form. That is, we have some angle <span class="math inline">\(\varphi\)</span> and some radius <span class="math inline">\(r\)</span>, giving us a point on the complex plane. See figure 2b for an example of this. We can convert the pair <span class="math inline">\((\varphi, r)\)</span> to cartesian form using trigonometry:</p>
<p><span class="math display">\[a = r \cdot cos \varphi\]</span> <span class="math display">\[b = r \cdot sin \varphi\]</span></p>
<figure>
<img src="../figures/vecmath_figure_2_fast.svg" alt="Figure 2: z = 2 + 3i on the complex number plane, shown in (a) cartesian form and (b) polar form" /><figcaption>Figure 2: <span class="math inline">\(z = 2 + 3i\)</span> on the complex number plane, shown in <strong>(a)</strong> cartesian form and <strong>(b)</strong> polar form</figcaption>
</figure>
<p>To summarize: We can represent a complex number either as a pair or real numbers <span class="math inline">\((a, b)\)</span>, or as a angle coupled with a real number <span class="math inline">\((\varphi, r)\)</span>. Note that both forms can represent the same number.</p>
<h2 id="multiplying-complex-numbers">Multiplying complex numbers</h2>
<p>Multiplying two complex numbers in cartesian form is relatively straight forward, though it might look a bit messy. The one thing you have to remember is that <span class="math inline">\(i^2 = (\sqrt{-1})^2 = -1\)</span>. Lets multiply the complex numbers <span class="math inline">\(z_1 = a + b \cdot i\)</span> and <span class="math inline">\(z_2 = c + d \cdot i\)</span>:</p>
<p><span class="math display">\[z_1 \cdot z_2 = (a + b \cdot i) \cdot (c + d \cdot i) = \]</span> <span class="math display">\[ac + bc \cdot i + ad \cdot i + bc \cdot i^2 =\]</span> <span class="math display">\[(ac - bd) + (ad + bc) \cdot i\]</span></p>
<p>ROTATION STUFF PLEASE</p>
<h2 id="going-back-to-vectors">Going back to vectors</h2>
<p>One thought that might have struck you while looking at figure 2a, is that it looks just like a 2d coordinate system. It turns out that we, for all intents and purposes, can treat complex numbers like 2d vectors. A 2d vector <span class="math inline">\((x, y)\)</span> then corresponds to the complex number <span class="math inline">\(x + y\cdot i\)</span>.</p>
<p>This means we can apply complex multiplication to vectors:</p>
<p><span class="math display">\[ (x_a, y_a) \otimes (x_b, y_b) = (x_a x_b - y_a y_b, x_a y_b - x_b y_a) \]</span></p>
<p>In code, this would look something like the following</p>
<pre class="sourceCode rust" id="cb1"><code class="sourceCode rust"><div class="sourceLine" id="cb1-1" data-line-number="1">complex_multiply(Vector2 a, Vector2 b) -&gt; c <span class="op">{</span></div>
<div class="sourceLine" id="cb1-2" data-line-number="2">    x = a.x*b.x - a.y*b.y;</div>
<div class="sourceLine" id="cb1-3" data-line-number="3">    y = a.x*b.y + a.y*b.x;</div>
<div class="sourceLine" id="cb1-4" data-line-number="4">    <span class="kw">return</span> Vector2 <span class="op">{</span> x, y <span class="op">}</span>;</div>
<div class="sourceLine" id="cb1-5" data-line-number="5"><span class="op">}</span></div></code></pre>
<footer>
    <p>Comments and questions are happily accepted at 
    <span class="email_a">morten</span><span class="email_a">hauke</span><span class="email_b">solvang</span><span class="email_a">gmail</span>com

    <p>This site is built using <a href="https://pandoc.org/">pandoc</a>
</footer>
</body>
</html>
